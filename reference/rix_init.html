<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Creates an isolated project folder for a Nix-R configuration. rix::rix_init()
also adds, appends, or updates with or without backup a custom .Rprofile
file with code that initializes a startup R environment without system's user
libraries within a Nix software environment. Instead, it restricts search
paths to load R packages exclusively from the Nix store. Additionally, it
makes Nix utilities like nix-shell available to run system commands from
the system's RStudio R session, for both Linux and macOS."><title>Initiate and maintain an isolated, project-specific, and runtime-pure R
setup via Nix. — rix_init • rix</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Initiate and maintain an isolated, project-specific, and runtime-pure R
setup via Nix. — rix_init"><meta property="og:description" content="Creates an isolated project folder for a Nix-R configuration. rix::rix_init()
also adds, appends, or updates with or without backup a custom .Rprofile
file with code that initializes a startup R environment without system's user
libraries within a Nix software environment. Instead, it restricts search
paths to load R packages exclusively from the Nix store. Additionally, it
makes Nix utilities like nix-shell available to run system commands from
the system's RStudio R session, for both Linux and macOS."><meta property="og:image" content="https://b-rodrigues.github.io/rix/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rix</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/a-getting-started.html">a - Getting started</a>
    <a class="dropdown-item" href="../articles/b1-setting-up-and-using-rix-on-linux-and-windows.html">b1 - Setting up and using rix on Linux and Windows</a>
    <a class="dropdown-item" href="../articles/b2-setting-up-and-using-rix-on-macos.html">b2 - Setting up and using rix on macOS</a>
    <a class="dropdown-item" href="../articles/c-using-rix-to-build-project-specific-environments.html">c - Using rix to build project specific environments</a>
    <a class="dropdown-item" href="../articles/d1-installing-r-packages-in-a-nix-environment.html">d1 - Installing R packages in a Nix environment</a>
    <a class="dropdown-item" href="../articles/d2-installing-system-tools-and-texlive-packages-in-a-nix-environment.html">d2 - Installing system tools and TexLive packages in a Nix environment</a>
    <a class="dropdown-item" href="../articles/e-interactive-use.html">e - Interactive use</a>
    <a class="dropdown-item" href="../articles/z-advanced-topic-building-an-environment-for-literate-programming.html">z - Advanced topic: Building an environment for literate programming</a>
    <a class="dropdown-item" href="../articles/z-advanced-topic-handling-packages-with-remote-dependencies.html">z - Advanced topic: Handling packages with remote dependencies</a>
    <a class="dropdown-item" href="../articles/z-advanced-topic-reproducible-analytical-pipelines-with-nix.html">z - Advanced topic: Reproducible Analytical Pipelines with Nix</a>
    <a class="dropdown-item" href="../articles/z-advanced-topic-running-r-or-shell-code-in-nix-from-r.html">z - Advanced topic: Running R or Shell Code in Nix from R</a>
    <a class="dropdown-item" href="../articles/z-developers-vignette-generate-an-environment-with-rix-only.html">z - Developers Vignette: Generate an environment with rix only</a>
    <a class="dropdown-item" href="../articles/z-developers-vignette-save-the-nix-package-versions-data.html">z - Developers Vignette: Save the Nix Package Versions data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/b-rodrigues/rix/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Initiate and maintain an isolated, project-specific, and runtime-pure R
setup via Nix.</h1>
      <small class="dont-index">Source: <a href="https://github.com/b-rodrigues/rix/blob/HEAD/R/rix_init.R" class="external-link"><code>R/rix_init.R</code></a></small>
      <div class="d-none name"><code>rix_init.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates an isolated project folder for a Nix-R configuration. <code>rix::rix_init()</code>
also adds, appends, or updates with or without backup a custom <code>.Rprofile</code>
file with code that initializes a startup R environment without system's user
libraries within a Nix software environment. Instead, it restricts search
paths to load R packages exclusively from the Nix store. Additionally, it
makes Nix utilities like <code>nix-shell</code> available to run system commands from
the system's RStudio R session, for both Linux and macOS.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rix_init</span><span class="op">(</span></span>
<span>  project_path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  rprofile_action <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"create_missing"</span>, <span class="st">"create_backup"</span>, <span class="st">"overwrite"</span>, <span class="st">"append"</span><span class="op">)</span>,</span>
<span>  message_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"simple"</span>, <span class="st">"verbose"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>project_path</dt>
<dd><p>Character with the folder path to the isolated nix-R project.
Defaults to <code>"."</code>, which is the current working directory path. If the folder
does not exist yet, it will be created.</p></dd>


<dt>rprofile_action</dt>
<dd><p>Character. Action to take with <code>.Rprofile</code> file
destined for <code>project_path</code> folder. Possible values include
<code>"create_missing"</code>, which only writes <code>.Rprofile</code> if it
does not yet exist (otherwise does nothing); <code>"create_backup"</code>, which copies
the existing <code>.Rprofile</code> to a new backup file, generating names with
POSIXct-derived strings that include the time zone information. A new
<code>.Rprofile</code> file will be written with default code from <code>rix::rix_init()</code>;
<code>"overwrite"</code> overwrites the <code>.Rprofile</code> file if it does exist; <code>"append"</code>
appends the existing file with code that is tailored to an isolated Nix-R
project setup.</p></dd>


<dt>message_type</dt>
<dd><p>Character. Message type, defaults to <code>"simple"</code>, which
gives minimal but sufficient feedback. Other values are currently
<code>"verbose"</code>, which provides more detailed diagnostics.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Nothing, this function only has the side-effect of writing a file
called ".Rprofile" to the specified path.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><strong>Enhancement of computational reproducibility for Nix-R environments:</strong></p>
<p>The primary goal of <code>rix::rix_init()</code> is to enhance the computational
reproducibility of Nix-R environments during runtime. Notably, no restart is
required as environmental variables are set in the current session, in
addition to writing an <code>.Rprofile</code> file. This is particularly useful to make
<code><a href="with_nix.html">with_nix()</a></code> evaluate custom R functions from any "Nix-to-Nix" or
"System-to-Nix" R setups. It introduces two side-effects that
take effect both in a current or later R session setup:</p><ol><li><p><strong>Adjusting <code>R_LIBS_USER</code> path:</strong>
By default, the first path of <code>R_LIBS_USER</code> points to the user library
outside the Nix store (see also <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">base::.libPaths()</a></code>). This creates
friction and potential impurity as R packages from the system's R user
library are loaded. While this feature can be useful for interactively
testing an R package in a Nix environment before adding it to a <code>.nix</code>
configuration, it can have undesired effects if not managed carefully.
A major drawback is that all R packages in the <code>R_LIBS_USER</code> location need
to be cleaned to avoid loading packages outside the Nix configuration.
Issues, especially on macOS, may arise due to segmentation faults or
incompatible linked system libraries. These problems can also occur
if one of the (reverse) dependencies of an R package is loaded  along the
process.</p></li>
<li><p><strong>Make Nix commands available when running system commands from RStudio:</strong>
In a host RStudio session not launched via Nix (<code>nix-shell</code>), the
environmental variables from <code>~/.zshrc</code> or <code>~/.bashrc</code> may not be
inherited. Consequently, Nix command line interfaces like <code>nix-shell</code>
might not be found. The <code>.Rprofile</code> code written by <code>rix::rix_init()</code> ensures
that Nix command line programs are accessible by adding the path of the
"bin" directory of the default Nix profile,
<code>"/nix/var/nix/profiles/default/bin"</code>, to the <code>PATH</code> variable in an
RStudio R session.</p></li>
</ol><p>These side effects are particularly recommended when working in flexible R
environments, especially for users who want to maintain both the system's
native R setup and utilize Nix expressions for reproducible development
environments. This init configuration is considered pivotal to enhance the
adoption of Nix in the R community, particularly until RStudio in Nixpkgs is
packaged for macOS. We recommend calling <code>rix::rix_init()</code> prior to comparing R
code ran between two software environments with <code><a href="with_nix.html">rix::with_nix()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="with_nix.html">with_nix()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># create an isolated, runtime-pure R setup via Nix</span></span></span>
<span class="r-in"><span><span class="va">project_path</span> <span class="op">&lt;-</span> <span class="st">"./sub_shell"</span></span></span>
<span class="r-in"><span><span class="fu">rix_init</span><span class="op">(</span></span></span>
<span class="r-in"><span>  project_path <span class="op">=</span> <span class="va">project_path</span>,</span></span>
<span class="r-in"><span>  rprofile_action <span class="op">=</span> <span class="st">"create_missing"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Bruno Rodrigues, Philipp Baumann.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

