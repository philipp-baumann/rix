<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>d1 - Installing R packages in a Nix environment • rix</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="d1 - Installing R packages in a Nix environment">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rix</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a-getting-started.html">a - Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/b1-setting-up-and-using-rix-on-linux-and-windows.html">b1 - Setting up and using rix on Linux and Windows</a></li>
    <li><a class="dropdown-item" href="../articles/b2-setting-up-and-using-rix-on-macos.html">b2 - Setting up and using rix on macOS</a></li>
    <li><a class="dropdown-item" href="../articles/c-using-rix-to-build-project-specific-environments.html">c - Using rix to build project specific environments</a></li>
    <li><a class="dropdown-item" href="../articles/d1-installing-r-packages-in-a-nix-environment.html">d1 - Installing R packages in a Nix environment</a></li>
    <li><a class="dropdown-item" href="../articles/d2-installing-system-tools-and-texlive-packages-in-a-nix-environment.html">d2 - Installing system tools and TexLive packages in a Nix environment</a></li>
    <li><a class="dropdown-item" href="../articles/e-interactive-use.html">e - Interactive use</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-building-an-environment-for-literate-programming.html">z - Advanced topic: Building an environment for literate programming</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-handling-packages-with-remote-dependencies.html">z - Advanced topic: Handling packages with remote dependencies</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-reproducible-analytical-pipelines-with-nix.html">z - Advanced topic: Reproducible Analytical Pipelines with Nix</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-running-r-or-shell-code-in-nix-from-r.html">z - Advanced topic: Running R or Shell Code in Nix from R</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-using-nix-inside-docker.html">z - Advanced topic: Using Nix inside Docker</a></li>
    <li><a class="dropdown-item" href="../articles/z-binary_cache.html">z - Advanced topic: Rolling out your own binary cache</a></li>
    <li><a class="dropdown-item" href="../articles/z-bleeding_edge.html">z - Advanced topic: Understanding the rPackages set release cycle and using bleeding edge packages</a></li>
    <li><a class="dropdown-item" href="../articles/z-contributing_to_nixpkgs.html">z - Advanced topic: Contributing to nixpkgs</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/b-rodrigues/rix/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>d1 - Installing R packages in a Nix environment</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/b-rodrigues/rix/blob/master/vignettes/d1-installing-r-packages-in-a-nix-environment.Rmd" class="external-link"><code>vignettes/d1-installing-r-packages-in-a-nix-environment.Rmd</code></a></small>
      <div class="d-none name"><code>d1-installing-r-packages-in-a-nix-environment.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>You now know how to declare and build reproducible development
environments using <a href="https://b-rodrigues.github.io/rix/">rix</a> and Nix. This vignette will
explain how to install specific versions of CRAN packages and how to
install packages from GitHub.</p>
</div>
<div class="section level2">
<h2 id="a-word-of-caution">A word of caution<a class="anchor" aria-label="anchor" href="#a-word-of-caution"></a>
</h2>
<p>It is important at this stage to understand that you should not call
<code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code> from a running Nix environment. If you
want to add packages while analyzing data, you need to add it the
<code>default.nix</code> expression and rebuild the environment. The
same goes for installing packages from Github; use the method described
in this vignette instead of using something like
<code>remotes::install_github()</code>.</p>
<p>We recommend you create a script called <code>create_env.R</code> or
similar, and add the call to <code><a href="../reference/rix.html">rix()</a></code> there:</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://b-rodrigues.github.io/rix/">rix</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span>r_ver <span class="op">=</span> <span class="st">"4.4.0"</span>,</span>
<span>    r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"ggplot2"</span><span class="op">)</span>,</span>
<span>    system_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    git_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    ide <span class="op">=</span> <span class="st">"code"</span>,</span>
<span>    project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    print <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
<p>Then, add the packages you need to <code>r_pkgs</code> and run the
script again. Then, build the environment using <code>nix-build</code>
again, and drop into it using <code>nix-shell</code>. Calling
<code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code> is a bad idea for several reasons:</p>
<ul>
<li>it goes against the idea of defining an environment in a declarative
way. If you were able to add packages using
<code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code>, your environment would end up in a
state where the <code>default.nix</code> definition of the environment
and the actual environment don’t match anymore.</li>
<li>using <code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code> will likely simply not work,
and if it does, will cause issues. For example, if you call
<code>install.packages("ggplot2")</code> from one Nix shell, it will not
install <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> “inside” the Nix shell, but will install
it on your user’s system library of packages. This is because the Nix
shell cannot be changed at run-time, and so, R will instead install the
packages in the user’s library. This version of <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a>,
because it is in that system-wide library of packages, will be available
to any other Nix shell. If you call
<code>install.packages("ggplot2")</code> again from another Nix shell,
say 6 months later, this will replace the first version of
<a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> with the latest version.</li>
</ul>
<p>Ideally, you should only manage R versions and R packages using Nix,
and uninstall any system-managed version of R and R packages. If you do
wish to keep a system-managed version of R and R packages, we highly
recommend that you call <code><a href="../reference/rix_init.html">rix_init()</a></code> from all the Nix shells.
This should ensure that your Nix projects and your system library of
packages don’t interfere with each other.</p>
</div>
<div class="section level2">
<h2 id="installing-old-packages-archived-on-cran">Installing old packages archived on CRAN<a class="anchor" aria-label="anchor" href="#installing-old-packages-archived-on-cran"></a>
</h2>
<p>It is possible to install an arbitrary version of a package that has
been archived on CRAN:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path_default_nix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span></span>
<span>  r_ver <span class="op">=</span> <span class="st">"4.2.1"</span>,</span>
<span>  r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr@0.8.0"</span>, <span class="st">"janitor@1.0.0"</span><span class="op">)</span>,</span>
<span>  system_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  git_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ide <span class="op">=</span> <span class="st">"other"</span>,</span>
<span>  project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; # This file was generated by the {rix} R package v0.7.1 on 2024-07-01</span></span>
<span><span class="co">#&gt; # with following call:</span></span>
<span><span class="co">#&gt; # &gt;rix(r_ver = "79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a",</span></span>
<span><span class="co">#&gt; #  &gt; r_pkgs = c("dplyr@0.8.0",</span></span>
<span><span class="co">#&gt; #  &gt; "janitor@1.0.0"),</span></span>
<span><span class="co">#&gt; #  &gt; system_pkgs = NULL,</span></span>
<span><span class="co">#&gt; #  &gt; git_pkgs = NULL,</span></span>
<span><span class="co">#&gt; #  &gt; ide = "other",</span></span>
<span><span class="co">#&gt; #  &gt; project_path = path_default_nix,</span></span>
<span><span class="co">#&gt; #  &gt; overwrite = TRUE)</span></span>
<span><span class="co">#&gt; # It uses nixpkgs' revision 79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a for reproducibility purposes</span></span>
<span><span class="co">#&gt; # which will install R version 4.2.1.</span></span>
<span><span class="co">#&gt; # Report any issues to https://github.com/b-rodrigues/rix</span></span>
<span><span class="co">#&gt; let</span></span>
<span><span class="co">#&gt;  pkgs = import (fetchTarball "https://github.com/NixOS/nixpkgs/archive/79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a.tar.gz") {};</span></span>
<span><span class="co">#&gt;   </span></span>
<span><span class="co">#&gt;   git_archive_pkgs = [ </span></span>
<span><span class="co">#&gt;     (pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;       name = "dplyr";</span></span>
<span><span class="co">#&gt;       src = pkgs.fetchzip {</span></span>
<span><span class="co">#&gt;        url = "https://cran.r-project.org/src/contrib/Archive/dplyr/dplyr_0.8.0.tar.gz";</span></span>
<span><span class="co">#&gt;        sha256 = "sha256-f30raalLd9KoZKZSxeTN71PG6BczXRIiP6g7EZeH09U=";</span></span>
<span><span class="co">#&gt;       };</span></span>
<span><span class="co">#&gt;       propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;         inherit (pkgs.rPackages) </span></span>
<span><span class="co">#&gt;           assertthat</span></span>
<span><span class="co">#&gt;           glue</span></span>
<span><span class="co">#&gt;           magrittr</span></span>
<span><span class="co">#&gt;           pkgconfig</span></span>
<span><span class="co">#&gt;           R6</span></span>
<span><span class="co">#&gt;           Rcpp</span></span>
<span><span class="co">#&gt;           rlang</span></span>
<span><span class="co">#&gt;           tibble</span></span>
<span><span class="co">#&gt;           tidyselect</span></span>
<span><span class="co">#&gt;           BH</span></span>
<span><span class="co">#&gt;           plogr;</span></span>
<span><span class="co">#&gt;       };</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     (pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;       name = "janitor";</span></span>
<span><span class="co">#&gt;       src = pkgs.fetchzip {</span></span>
<span><span class="co">#&gt;        url = "https://cran.r-project.org/src/contrib/Archive/janitor/janitor_1.0.0.tar.gz";</span></span>
<span><span class="co">#&gt;        sha256 = "sha256-3NJomE/CNbOZ+ohuVZJWe2n1RVGUm8x8a0A0qzLmdN4=";</span></span>
<span><span class="co">#&gt;       };</span></span>
<span><span class="co">#&gt;       propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;         inherit (pkgs.rPackages) </span></span>
<span><span class="co">#&gt;           dplyr</span></span>
<span><span class="co">#&gt;           tidyr</span></span>
<span><span class="co">#&gt;           snakecase</span></span>
<span><span class="co">#&gt;           magrittr</span></span>
<span><span class="co">#&gt;           purrr</span></span>
<span><span class="co">#&gt;           rlang;</span></span>
<span><span class="co">#&gt;       };</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt;   ];</span></span>
<span><span class="co">#&gt;    </span></span>
<span><span class="co">#&gt;   system_packages = builtins.attrValues {</span></span>
<span><span class="co">#&gt;     inherit (pkgs) </span></span>
<span><span class="co">#&gt;       R</span></span>
<span><span class="co">#&gt;       glibcLocales</span></span>
<span><span class="co">#&gt;       nix;</span></span>
<span><span class="co">#&gt;   };</span></span>
<span><span class="co">#&gt;   </span></span>
<span><span class="co">#&gt; in</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; pkgs.mkShell {</span></span>
<span><span class="co">#&gt;   LOCALE_ARCHIVE = if pkgs.system == "x86_64-linux" then  "${pkgs.glibcLocales}/lib/locale/locale-archive" else "";</span></span>
<span><span class="co">#&gt;   LANG = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;    LC_ALL = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;    LC_TIME = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;    LC_MONETARY = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;    LC_PAPER = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;    LC_MEASUREMENT = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   buildInputs = [ git_archive_pkgs   system_packages   ];</span></span>
<span><span class="co">#&gt;   </span></span>
<span><span class="co">#&gt; }</span></span></code></pre>
<p>The above expression will install R version 4.2.1, and
<a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> at version 0.8.0 and <a href="https://github.com/sfirke/janitor" class="external-link">janitor</a> at
version 1.0.0. This can be useful, especially for packages that have
been archived, but otherwise, this feature should ideally be used
sparingly. If you want to reconstruct an environment as it was around
2019, use the version of R that was current at that time. This will
ensure that every package that gets installed is at a version compatible
with that version of R, which might not be the case if you need to
install a very old version of one particular package.</p>
</div>
<div class="section level2">
<h2 id="installing-packages-from-github">Installing packages from Github<a class="anchor" aria-label="anchor" href="#installing-packages-from-github"></a>
</h2>
<p>It is also possible to install packages from Github:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path_default_nix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span></span>
<span>  r_ver <span class="op">=</span> <span class="st">"4.2.1"</span>,</span>
<span>  r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"janitor"</span><span class="op">)</span>,</span>
<span>  git_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      package_name <span class="op">=</span> <span class="st">"housing"</span>,</span>
<span>      repo_url <span class="op">=</span> <span class="st">"https://github.com/rap4all/housing/"</span>,</span>
<span>      commit <span class="op">=</span> <span class="st">"1c860959310b80e67c41f7bbdc3e84cef00df18e"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      package_name <span class="op">=</span> <span class="st">"fusen"</span>,</span>
<span>      repo_url <span class="op">=</span> <span class="st">"https://github.com/ThinkR-open/fusen"</span>,</span>
<span>      commit <span class="op">=</span> <span class="st">"d617172447d2947efb20ad6a4463742b8a5d79dc"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  ide <span class="op">=</span> <span class="st">"other"</span>,</span>
<span>  project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This will install two packages from Github: the
<code>{housing}</code> package and more specifically the code as it is
in the <code>fusen</code> branch; however the branch name is not
required, as the commit is enough to pin the exact version of the code
needed. The <a href="https://thinkr-open.github.io/fusen/" class="external-link">fusen</a> package is also installed, as of commit
<code>d617172447d</code>.</p>
</div>
<div class="section level2">
<h2 id="installing-local-archives">Installing local archives<a class="anchor" aria-label="anchor" href="#installing-local-archives"></a>
</h2>
<p>It is also possible to install packages from a local
<code>tar.gz</code> file. For this, place the package in the same folder
where the <code>default.nix</code> will be generated, and write
something like this:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span></span>
<span>  r_ver <span class="op">=</span> <span class="st">"4.3.1"</span>,</span>
<span>  local_r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"chronicler_0.2.1.tar.gz"</span>, <span class="st">"knitr_1.43.tar.gz"</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This assumes that both <code>chronicler_0.2.1.tar.gz</code> and
<code>knitr_1.43.tar.gz</code> have been downloaded beforehand. If you
want to include a local package that you are developing, make sure to
first build it using <code>devtools::build()</code> to build the
<code>.tar.gz</code> archive, but if you can, consider uploading the
source code to your package on Github and installing it from Github
instead.</p>
</div>
<div class="section level2">
<h2 id="a-complete-example">A complete example<a class="anchor" aria-label="anchor" href="#a-complete-example"></a>
</h2>
<p>This example shows how to install packages from CRAN, from the CRAN
archives and from GitHub:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path_default_nix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span></span>
<span>  r_ver <span class="op">=</span> <span class="st">"4.2.1"</span>,</span>
<span>  r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"janitor"</span>, <span class="st">"AER@1.2-8"</span><span class="op">)</span>,</span>
<span>  git_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      package_name <span class="op">=</span> <span class="st">"housing"</span>,</span>
<span>      repo_url <span class="op">=</span> <span class="st">"https://github.com/rap4all/housing/"</span>,</span>
<span>      commit <span class="op">=</span> <span class="st">"1c860959310b80e67c41f7bbdc3e84cef00df18e"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      package_name <span class="op">=</span> <span class="st">"fusen"</span>,</span>
<span>      repo_url <span class="op">=</span> <span class="st">"https://github.com/ThinkR-open/fusen"</span>,</span>
<span>      commit <span class="op">=</span> <span class="st">"d617172447d2947efb20ad6a4463742b8a5d79dc"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  ide <span class="op">=</span> <span class="st">"other"</span>,</span>
<span>  project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; # This file was generated by the {rix} R package v0.7.1 on 2024-07-01</span></span>
<span><span class="co">#&gt; # with following call:</span></span>
<span><span class="co">#&gt; # &gt;rix(r_ver = "79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a",</span></span>
<span><span class="co">#&gt; #  &gt; r_pkgs = c("dplyr",</span></span>
<span><span class="co">#&gt; #  &gt; "janitor",</span></span>
<span><span class="co">#&gt; #  &gt; "AER@1.2-8"),</span></span>
<span><span class="co">#&gt; #  &gt; git_pkgs = list(list(package_name = "housing",</span></span>
<span><span class="co">#&gt; #  &gt; repo_url = "https://github.com/rap4all/housing/",</span></span>
<span><span class="co">#&gt; #  &gt; commit = "1c860959310b80e67c41f7bbdc3e84cef00df18e"),</span></span>
<span><span class="co">#&gt; #  &gt; list(package_name = "fusen",</span></span>
<span><span class="co">#&gt; #  &gt; repo_url = "https://github.com/ThinkR-open/fusen",</span></span>
<span><span class="co">#&gt; #  &gt; commit = "d617172447d2947efb20ad6a4463742b8a5d79dc")),</span></span>
<span><span class="co">#&gt; #  &gt; ide = "other",</span></span>
<span><span class="co">#&gt; #  &gt; project_path = path_default_nix,</span></span>
<span><span class="co">#&gt; #  &gt; overwrite = TRUE)</span></span>
<span><span class="co">#&gt; # It uses nixpkgs' revision 79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a for reproducibility purposes</span></span>
<span><span class="co">#&gt; # which will install R version 4.2.1.</span></span>
<span><span class="co">#&gt; # Report any issues to https://github.com/b-rodrigues/rix</span></span>
<span><span class="co">#&gt; let</span></span>
<span><span class="co">#&gt;  pkgs = import (fetchTarball "https://github.com/NixOS/nixpkgs/archive/79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a.tar.gz") {};</span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt;   rpkgs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;     inherit (pkgs.rPackages) </span></span>
<span><span class="co">#&gt;       dplyr</span></span>
<span><span class="co">#&gt;       janitor;</span></span>
<span><span class="co">#&gt;   };</span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt;   git_archive_pkgs = [</span></span>
<span><span class="co">#&gt;     (pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;       name = "housing";</span></span>
<span><span class="co">#&gt;       src = pkgs.fetchgit {</span></span>
<span><span class="co">#&gt;         url = "https://github.com/rap4all/housing/";</span></span>
<span><span class="co">#&gt;         rev = "1c860959310b80e67c41f7bbdc3e84cef00df18e";</span></span>
<span><span class="co">#&gt;         sha256 = "sha256-s4KGtfKQ7hL0sfDhGb4BpBpspfefBN6hf+XlslqyEn4=";</span></span>
<span><span class="co">#&gt;       };</span></span>
<span><span class="co">#&gt;       propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;         inherit (pkgs.rPackages) </span></span>
<span><span class="co">#&gt;           dplyr</span></span>
<span><span class="co">#&gt;           ggplot2</span></span>
<span><span class="co">#&gt;           janitor</span></span>
<span><span class="co">#&gt;           purrr</span></span>
<span><span class="co">#&gt;           readxl</span></span>
<span><span class="co">#&gt;           rlang</span></span>
<span><span class="co">#&gt;           rvest</span></span>
<span><span class="co">#&gt;           stringr</span></span>
<span><span class="co">#&gt;           tidyr;</span></span>
<span><span class="co">#&gt;       };</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     (pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;       name = "fusen";</span></span>
<span><span class="co">#&gt;       src = pkgs.fetchgit {</span></span>
<span><span class="co">#&gt;         url = "https://github.com/ThinkR-open/fusen";</span></span>
<span><span class="co">#&gt;         rev = "d617172447d2947efb20ad6a4463742b8a5d79dc";</span></span>
<span><span class="co">#&gt;         sha256 = "sha256-TOHA1ymLUSgZMYIA1a2yvuv0799svaDOl3zOhNRxcmw=";</span></span>
<span><span class="co">#&gt;       };</span></span>
<span><span class="co">#&gt;       propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;         inherit (pkgs.rPackages) </span></span>
<span><span class="co">#&gt;           attachment</span></span>
<span><span class="co">#&gt;           cli</span></span>
<span><span class="co">#&gt;           desc</span></span>
<span><span class="co">#&gt;           devtools</span></span>
<span><span class="co">#&gt;           glue</span></span>
<span><span class="co">#&gt;           here</span></span>
<span><span class="co">#&gt;           magrittr</span></span>
<span><span class="co">#&gt;           parsermd</span></span>
<span><span class="co">#&gt;           roxygen2</span></span>
<span><span class="co">#&gt;           stringi</span></span>
<span><span class="co">#&gt;           tibble</span></span>
<span><span class="co">#&gt;           tidyr</span></span>
<span><span class="co">#&gt;           usethis</span></span>
<span><span class="co">#&gt;           yaml;</span></span>
<span><span class="co">#&gt;       };</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt;     (pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;       name = "AER";</span></span>
<span><span class="co">#&gt;       src = pkgs.fetchzip {</span></span>
<span><span class="co">#&gt;        url = "https://cran.r-project.org/src/contrib/Archive/AER/AER_1.2-8.tar.gz";</span></span>
<span><span class="co">#&gt;        sha256 = "sha256-OqxXcnUX/2C6wfD5fuNayc8OU+mstI3tt4eBVGQZ2S0=";</span></span>
<span><span class="co">#&gt;       };</span></span>
<span><span class="co">#&gt;       propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;         inherit (pkgs.rPackages) </span></span>
<span><span class="co">#&gt;           car</span></span>
<span><span class="co">#&gt;           lmtest</span></span>
<span><span class="co">#&gt;           sandwich</span></span>
<span><span class="co">#&gt;           survival</span></span>
<span><span class="co">#&gt;           zoo</span></span>
<span><span class="co">#&gt;           Formula;</span></span>
<span><span class="co">#&gt;       };</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt;   ];</span></span>
<span><span class="co">#&gt;    </span></span>
<span><span class="co">#&gt;   system_packages = builtins.attrValues {</span></span>
<span><span class="co">#&gt;     inherit (pkgs) </span></span>
<span><span class="co">#&gt;       R</span></span>
<span><span class="co">#&gt;       glibcLocales</span></span>
<span><span class="co">#&gt;       nix;</span></span>
<span><span class="co">#&gt;   };</span></span>
<span><span class="co">#&gt;   </span></span>
<span><span class="co">#&gt; in</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; pkgs.mkShell {</span></span>
<span><span class="co">#&gt;   LOCALE_ARCHIVE = if pkgs.system == "x86_64-linux" then  "${pkgs.glibcLocales}/lib/locale/locale-archive" else "";</span></span>
<span><span class="co">#&gt;   LANG = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;    LC_ALL = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;    LC_TIME = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;    LC_MONETARY = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;    LC_PAPER = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;    LC_MEASUREMENT = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt;   buildInputs = [ git_archive_pkgs rpkgs  system_packages   ];</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; }</span></span></code></pre>
<p>The next vignette,
<code><a href="../articles/d2-installing-system-tools-and-texlive-packages-in-a-nix-environment.html">vignette("d2-installing-system-tools-and-texlive-packages-in-a-nix-environment")</a></code>,
explains how you can install tools such as text editors, git, Quarto,
TexLive packages, and any other tool available through
<code>nixpkgs</code> for your development environments.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bruno Rodrigues, Philipp Baumann.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
