<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rix">
<title>d1 - Installing R packages in a Nix environment â€¢ rix</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="d1 - Installing R packages in a Nix environment">
<meta property="og:description" content="rix">
<meta property="og:image" content="https://b-rodrigues.github.io/rix/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rix</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/a-getting-started.html">a - Getting started</a>
    <a class="dropdown-item" href="../articles/b1-setting-up-and-using-rix-on-linux-and-windows.html">b1 - Setting up and using rix on Linux and Windows</a>
    <a class="dropdown-item" href="../articles/b2-setting-up-and-using-rix-on-macos.html">b2 - Setting up and using rix on macOS</a>
    <a class="dropdown-item" href="../articles/c-using-rix-to-build-project-specific-environments.html">c - Using rix to build project specific environments</a>
    <a class="dropdown-item" href="../articles/d1-installing-r-packages-in-a-nix-environment.html">d1 - Installing R packages in a Nix environment</a>
    <a class="dropdown-item" href="../articles/d2-installing-system-tools-and-texlive-packages-in-a-nix-environment.html">d2 - Installing system tools and TexLive packages in a Nix environment</a>
    <a class="dropdown-item" href="../articles/e-interactive-use.html">e - Interactive use</a>
    <a class="dropdown-item" href="../articles/z-advanced-topic-building-an-environment-for-literate-programming.html">z - Advanced topic: Building an environment for literate programming</a>
    <a class="dropdown-item" href="../articles/z-advanced-topic-handling-packages-with-remote-dependencies.html">z - Advanced topic: Handling packages with remote dependencies</a>
    <a class="dropdown-item" href="../articles/z-advanced-topic-reproducible-analytical-pipelines-with-nix.html">z - Advanced topic: Reproducible Analytical Pipelines with Nix</a>
    <a class="dropdown-item" href="../articles/z-advanced-topic-running-r-or-shell-code-in-nix-from-r.html">z - Advanced topic: Running R or Shell Code in Nix from R</a>
    <a class="dropdown-item" href="../articles/z-developers-vignette-save-the-nix-package-versions-data.html">z - Developers Vignette: Save the Nix Package Versions data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/b-rodrigues/rix/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>d1 - Installing R packages in a Nix environment</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/b-rodrigues/rix/blob/HEAD/vignettes/d1-installing-r-packages-in-a-nix-environment.Rmd" class="external-link"><code>vignettes/d1-installing-r-packages-in-a-nix-environment.Rmd</code></a></small>
      <div class="d-none name"><code>d1-installing-r-packages-in-a-nix-environment.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://b-rodrigues.github.io/rix/">rix</a></span><span class="op">)</span></span></code></pre></div>
<!-- WARNING - This vignette is generated by {fusen} from dev/d1-install_r_pkgs.Rmd: do not edit by hand -->
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>You now know how to declare and build reproducible development
environments using <a href="https://b-rodrigues.github.io/rix/">rix</a> and Nix. This vignette will
explain how to install specific versions of CRAN packages and how to
install packages from GitHub.</p>
</div>
<div class="section level2">
<h2 id="installing-old-packages-archived-on-cran">Installing old packages archived on CRAN<a class="anchor" aria-label="anchor" href="#installing-old-packages-archived-on-cran"></a>
</h2>
<p>It is possible to install an arbitrary version of a package that has
been archived on CRAN:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path_default_nix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span>r_ver <span class="op">=</span> <span class="st">"4.2.1"</span>,</span>
<span>    r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr@0.8.0"</span>, <span class="st">"janitor@1.0.0"</span><span class="op">)</span>,</span>
<span>    system_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    git_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    ide <span class="op">=</span> <span class="st">"other"</span>,</span>
<span>    project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; # This file was generated by the {rix} R package v0.6.0 on 2024-02-07</span></span>
<span><span class="co">#&gt; # with following call:</span></span>
<span><span class="co">#&gt; # &gt;rix(r_ver = "79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a",</span></span>
<span><span class="co">#&gt; #  &gt; r_pkgs = c("dplyr@0.8.0",</span></span>
<span><span class="co">#&gt; #  &gt; "janitor@1.0.0"),</span></span>
<span><span class="co">#&gt; #  &gt; system_pkgs = NULL,</span></span>
<span><span class="co">#&gt; #  &gt; git_pkgs = NULL,</span></span>
<span><span class="co">#&gt; #  &gt; ide = "other",</span></span>
<span><span class="co">#&gt; #  &gt; project_path = path_default_nix,</span></span>
<span><span class="co">#&gt; #  &gt; overwrite = TRUE)</span></span>
<span><span class="co">#&gt; # It uses nixpkgs' revision 79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a for reproducibility purposes</span></span>
<span><span class="co">#&gt; # which will install R version 4.2.1</span></span>
<span><span class="co">#&gt; # Report any issues to https://github.com/b-rodrigues/rix</span></span>
<span><span class="co">#&gt; let</span></span>
<span><span class="co">#&gt;  pkgs = import (fetchTarball "https://github.com/NixOS/nixpkgs/archive/79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a.tar.gz") {};</span></span>
<span><span class="co">#&gt;   git_archive_pkgs = [ (pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;     name = "dplyr";</span></span>
<span><span class="co">#&gt;     src = pkgs.fetchzip {</span></span>
<span><span class="co">#&gt;       url = "https://cran.r-project.org/src/contrib/Archive/dplyr/dplyr_0.8.0.tar.gz";</span></span>
<span><span class="co">#&gt;       sha256 = "sha256-f30raalLd9KoZKZSxeTN71PG6BczXRIiP6g7EZeH09U=";</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;     propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;       inherit (pkgs.rPackages) assertthat glue magrittr pkgconfig R6 Rcpp rlang tibble tidyselect BH plogr;</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;   })</span></span>
<span><span class="co">#&gt; (pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;     name = "janitor";</span></span>
<span><span class="co">#&gt;     src = pkgs.fetchzip {</span></span>
<span><span class="co">#&gt;       url = "https://cran.r-project.org/src/contrib/Archive/janitor/janitor_1.0.0.tar.gz";</span></span>
<span><span class="co">#&gt;       sha256 = "sha256-3NJomE/CNbOZ+ohuVZJWe2n1RVGUm8x8a0A0qzLmdN4=";</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;     propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;       inherit (pkgs.rPackages) dplyr tidyr snakecase magrittr purrr rlang;</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;   })];</span></span>
<span><span class="co">#&gt;   system_packages = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs) R glibcLocales nix ;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;   in</span></span>
<span><span class="co">#&gt;   pkgs.mkShell {</span></span>
<span><span class="co">#&gt;     LOCALE_ARCHIVE = if pkgs.system == "x86_64-linux" then  "${pkgs.glibcLocales}/lib/locale/locale-archive" else "";</span></span>
<span><span class="co">#&gt;     LANG = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;     LC_ALL = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;     LC_TIME = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;     LC_MONETARY = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;     LC_PAPER = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;     LC_MEASUREMENT = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     buildInputs = [ git_archive_pkgs   system_packages  ];</span></span>
<span><span class="co">#&gt;       </span></span>
<span><span class="co">#&gt;   }</span></span></code></pre>
<p>The above expression will install R version 4.2.1, and
<a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> at version 0.8.0 and <a href="https://github.com/sfirke/janitor" class="external-link">janitor</a> at
version 1.0.0. This can be useful, especially for packages that have
been archived, but otherwise, this feature should ideally be used
sparingly. If you want to reconstruct an environment as it was around
2019, use the version of R that was current at that time. This will
ensure that every package that gets installed is at a version compatible
with that version of R, which might not be the case if you need to
install a very old version of one particular package.</p>
</div>
<div class="section level2">
<h2 id="installing-packages-from-github">Installing packages from Github<a class="anchor" aria-label="anchor" href="#installing-packages-from-github"></a>
</h2>
<p>It is also possible to install packages from Github:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span>r_ver <span class="op">=</span> <span class="st">"4.2.1"</span>,</span>
<span>    r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"janitor"</span><span class="op">)</span>,</span>
<span>    git_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>package_name <span class="op">=</span> <span class="st">"housing"</span>,</span>
<span>                   repo_url <span class="op">=</span> <span class="st">"https://github.com/rap4all/housing/"</span>,</span>
<span>                   branch_name <span class="op">=</span> <span class="st">"fusen"</span>,</span>
<span>                   commit <span class="op">=</span> <span class="st">"1c860959310b80e67c41f7bbdc3e84cef00df18e"</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>package_name <span class="op">=</span> <span class="st">"fusen"</span>,</span>
<span>                   repo_url <span class="op">=</span> <span class="st">"https://github.com/ThinkR-open/fusen"</span>,</span>
<span>                   branch_name <span class="op">=</span> <span class="st">"main"</span>,</span>
<span>                   commit <span class="op">=</span> <span class="st">"d617172447d2947efb20ad6a4463742b8a5d79dc"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    ide <span class="op">=</span> <span class="st">"other"</span>,</span>
<span>    project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; # This file was generated by the {rix} R package v0.6.0 on 2024-02-07</span></span>
<span><span class="co">#&gt; # with following call:</span></span>
<span><span class="co">#&gt; # &gt;rix(r_ver = "79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a",</span></span>
<span><span class="co">#&gt; #  &gt; r_pkgs = c("dplyr",</span></span>
<span><span class="co">#&gt; #  &gt; "janitor"),</span></span>
<span><span class="co">#&gt; #  &gt; git_pkgs = list(list(package_name = "housing",</span></span>
<span><span class="co">#&gt; #  &gt; repo_url = "https://github.com/rap4all/housing/",</span></span>
<span><span class="co">#&gt; #  &gt; branch_name = "fusen",</span></span>
<span><span class="co">#&gt; #  &gt; commit = "1c860959310b80e67c41f7bbdc3e84cef00df18e"),</span></span>
<span><span class="co">#&gt; #  &gt; list(package_name = "fusen",</span></span>
<span><span class="co">#&gt; #  &gt; repo_url = "https://github.com/ThinkR-open/fusen",</span></span>
<span><span class="co">#&gt; #  &gt; branch_name = "main",</span></span>
<span><span class="co">#&gt; #  &gt; commit = "d617172447d2947efb20ad6a4463742b8a5d79dc")),</span></span>
<span><span class="co">#&gt; #  &gt; ide = "other",</span></span>
<span><span class="co">#&gt; #  &gt; project_path = path_default_nix,</span></span>
<span><span class="co">#&gt; #  &gt; overwrite = TRUE)</span></span>
<span><span class="co">#&gt; # It uses nixpkgs' revision 79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a for reproducibility purposes</span></span>
<span><span class="co">#&gt; # which will install R version 4.2.1</span></span>
<span><span class="co">#&gt; # Report any issues to https://github.com/b-rodrigues/rix</span></span>
<span><span class="co">#&gt; let</span></span>
<span><span class="co">#&gt;  pkgs = import (fetchTarball "https://github.com/NixOS/nixpkgs/archive/79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a.tar.gz") {};</span></span>
<span><span class="co">#&gt;  rpkgs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs.rPackages) dplyr janitor;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;  git_archive_pkgs = [(pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;     name = "housing";</span></span>
<span><span class="co">#&gt;     src = pkgs.fetchgit {</span></span>
<span><span class="co">#&gt;       url = "https://github.com/rap4all/housing/";</span></span>
<span><span class="co">#&gt;       branchName = "fusen";</span></span>
<span><span class="co">#&gt;       rev = "1c860959310b80e67c41f7bbdc3e84cef00df18e";</span></span>
<span><span class="co">#&gt;       sha256 = "sha256-s4KGtfKQ7hL0sfDhGb4BpBpspfefBN6hf+XlslqyEn4=";</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;     propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;       inherit (pkgs.rPackages) dplyr ggplot2 janitor purrr readxl rlang rvest stringr tidyr;</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;   })</span></span>
<span><span class="co">#&gt; (pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;     name = "fusen";</span></span>
<span><span class="co">#&gt;     src = pkgs.fetchgit {</span></span>
<span><span class="co">#&gt;       url = "https://github.com/ThinkR-open/fusen";</span></span>
<span><span class="co">#&gt;       branchName = "main";</span></span>
<span><span class="co">#&gt;       rev = "d617172447d2947efb20ad6a4463742b8a5d79dc";</span></span>
<span><span class="co">#&gt;       sha256 = "sha256-TOHA1ymLUSgZMYIA1a2yvuv0799svaDOl3zOhNRxcmw=";</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;     propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;       inherit (pkgs.rPackages) attachment cli desc devtools glue here magrittr parsermd roxygen2 stringi tibble tidyr usethis yaml;</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;   }) ];</span></span>
<span><span class="co">#&gt;   system_packages = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs) R glibcLocales nix ;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;   in</span></span>
<span><span class="co">#&gt;   pkgs.mkShell {</span></span>
<span><span class="co">#&gt;     LOCALE_ARCHIVE = if pkgs.system == "x86_64-linux" then  "${pkgs.glibcLocales}/lib/locale/locale-archive" else "";</span></span>
<span><span class="co">#&gt;     LANG = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;     LC_ALL = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;     LC_TIME = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;     LC_MONETARY = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;     LC_PAPER = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;     LC_MEASUREMENT = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     buildInputs = [ git_archive_pkgs rpkgs  system_packages  ];</span></span>
<span><span class="co">#&gt;       </span></span>
<span><span class="co">#&gt;   }</span></span></code></pre>
<p>This will install two packages from Github: the
<code>{housing}</code> package and more specifically the code as it is
in the <code>fusen</code> branch. The commit is also provided, to pin
the exact version of the package needed. The <a href="https://thinkr-open.github.io/fusen/" class="external-link">fusen</a>
package is also installed, from the main branch at commit
<code>d617172447d</code>.</p>
</div>
<div class="section level2">
<h2 id="a-complete-example">A complete example<a class="anchor" aria-label="anchor" href="#a-complete-example"></a>
</h2>
<p>This example shows how to install packages from CRAN, from the CRAN
archives and from GitHub:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span>r_ver <span class="op">=</span> <span class="st">"4.2.1"</span>,</span>
<span>    r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"janitor"</span>, <span class="st">"AER@1.2-8"</span><span class="op">)</span>,</span>
<span>    git_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>package_name <span class="op">=</span> <span class="st">"housing"</span>,</span>
<span>                   repo_url <span class="op">=</span> <span class="st">"https://github.com/rap4all/housing/"</span>,</span>
<span>                   branch_name <span class="op">=</span> <span class="st">"fusen"</span>,</span>
<span>                   commit <span class="op">=</span> <span class="st">"1c860959310b80e67c41f7bbdc3e84cef00df18e"</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>package_name <span class="op">=</span> <span class="st">"fusen"</span>,</span>
<span>                   repo_url <span class="op">=</span> <span class="st">"https://github.com/ThinkR-open/fusen"</span>,</span>
<span>                   branch_name <span class="op">=</span> <span class="st">"main"</span>,</span>
<span>                   commit <span class="op">=</span> <span class="st">"d617172447d2947efb20ad6a4463742b8a5d79dc"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    ide <span class="op">=</span> <span class="st">"other"</span>,</span>
<span>    project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; # This file was generated by the {rix} R package v0.6.0 on 2024-02-07</span></span>
<span><span class="co">#&gt; # with following call:</span></span>
<span><span class="co">#&gt; # &gt;rix(r_ver = "79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a",</span></span>
<span><span class="co">#&gt; #  &gt; r_pkgs = c("dplyr",</span></span>
<span><span class="co">#&gt; #  &gt; "janitor",</span></span>
<span><span class="co">#&gt; #  &gt; "AER@1.2-8"),</span></span>
<span><span class="co">#&gt; #  &gt; git_pkgs = list(list(package_name = "housing",</span></span>
<span><span class="co">#&gt; #  &gt; repo_url = "https://github.com/rap4all/housing/",</span></span>
<span><span class="co">#&gt; #  &gt; branch_name = "fusen",</span></span>
<span><span class="co">#&gt; #  &gt; commit = "1c860959310b80e67c41f7bbdc3e84cef00df18e"),</span></span>
<span><span class="co">#&gt; #  &gt; list(package_name = "fusen",</span></span>
<span><span class="co">#&gt; #  &gt; repo_url = "https://github.com/ThinkR-open/fusen",</span></span>
<span><span class="co">#&gt; #  &gt; branch_name = "main",</span></span>
<span><span class="co">#&gt; #  &gt; commit = "d617172447d2947efb20ad6a4463742b8a5d79dc")),</span></span>
<span><span class="co">#&gt; #  &gt; ide = "other",</span></span>
<span><span class="co">#&gt; #  &gt; project_path = path_default_nix,</span></span>
<span><span class="co">#&gt; #  &gt; overwrite = TRUE)</span></span>
<span><span class="co">#&gt; # It uses nixpkgs' revision 79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a for reproducibility purposes</span></span>
<span><span class="co">#&gt; # which will install R version 4.2.1</span></span>
<span><span class="co">#&gt; # Report any issues to https://github.com/b-rodrigues/rix</span></span>
<span><span class="co">#&gt; let</span></span>
<span><span class="co">#&gt;  pkgs = import (fetchTarball "https://github.com/NixOS/nixpkgs/archive/79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a.tar.gz") {};</span></span>
<span><span class="co">#&gt;  rpkgs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs.rPackages) dplyr janitor;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;  git_archive_pkgs = [(pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;     name = "housing";</span></span>
<span><span class="co">#&gt;     src = pkgs.fetchgit {</span></span>
<span><span class="co">#&gt;       url = "https://github.com/rap4all/housing/";</span></span>
<span><span class="co">#&gt;       branchName = "fusen";</span></span>
<span><span class="co">#&gt;       rev = "1c860959310b80e67c41f7bbdc3e84cef00df18e";</span></span>
<span><span class="co">#&gt;       sha256 = "sha256-s4KGtfKQ7hL0sfDhGb4BpBpspfefBN6hf+XlslqyEn4=";</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;     propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;       inherit (pkgs.rPackages) dplyr ggplot2 janitor purrr readxl rlang rvest stringr tidyr;</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;   })</span></span>
<span><span class="co">#&gt; (pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;     name = "fusen";</span></span>
<span><span class="co">#&gt;     src = pkgs.fetchgit {</span></span>
<span><span class="co">#&gt;       url = "https://github.com/ThinkR-open/fusen";</span></span>
<span><span class="co">#&gt;       branchName = "main";</span></span>
<span><span class="co">#&gt;       rev = "d617172447d2947efb20ad6a4463742b8a5d79dc";</span></span>
<span><span class="co">#&gt;       sha256 = "sha256-TOHA1ymLUSgZMYIA1a2yvuv0799svaDOl3zOhNRxcmw=";</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;     propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;       inherit (pkgs.rPackages) attachment cli desc devtools glue here magrittr parsermd roxygen2 stringi tibble tidyr usethis yaml;</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;   }) (pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;     name = "AER";</span></span>
<span><span class="co">#&gt;     src = pkgs.fetchzip {</span></span>
<span><span class="co">#&gt;       url = "https://cran.r-project.org/src/contrib/Archive/AER/AER_1.2-8.tar.gz";</span></span>
<span><span class="co">#&gt;       sha256 = "sha256-OqxXcnUX/2C6wfD5fuNayc8OU+mstI3tt4eBVGQZ2S0=";</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;     propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;       inherit (pkgs.rPackages) car lmtest sandwich survival zoo Formula;</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;   })];</span></span>
<span><span class="co">#&gt;   system_packages = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs) R glibcLocales nix ;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;   in</span></span>
<span><span class="co">#&gt;   pkgs.mkShell {</span></span>
<span><span class="co">#&gt;     LOCALE_ARCHIVE = if pkgs.system == "x86_64-linux" then  "${pkgs.glibcLocales}/lib/locale/locale-archive" else "";</span></span>
<span><span class="co">#&gt;     LANG = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;     LC_ALL = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;     LC_TIME = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;     LC_MONETARY = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;     LC_PAPER = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;     LC_MEASUREMENT = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     buildInputs = [ git_archive_pkgs rpkgs  system_packages  ];</span></span>
<span><span class="co">#&gt;       </span></span>
<span><span class="co">#&gt;   }</span></span></code></pre>
<p>The next vignette,
<code><a href="../articles/d2-installing-system-tools-and-texlive-packages-in-a-nix-environment.html">vignette("d2-installing-system-tools-and-texlive-packages-in-a-nix-environment")</a></code>,
explains how you can install tools such as text editors, git, Quarto,
TexLive packages, and any other tool available through
<code>nixpkgs</code> for your development environments.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Bruno Rodrigues, Philipp Baumann.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
