<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>e - Interactive use • rix</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="e - Interactive use">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rix</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a-getting-started.html">a - Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/b1-setting-up-and-using-rix-on-linux-and-windows.html">b1 - Setting up and using rix on Linux and Windows</a></li>
    <li><a class="dropdown-item" href="../articles/b2-setting-up-and-using-rix-on-macos.html">b2 - Setting up and using rix on macOS</a></li>
    <li><a class="dropdown-item" href="../articles/c-using-rix-to-build-project-specific-environments.html">c - Using rix to build project specific environments</a></li>
    <li><a class="dropdown-item" href="../articles/d1-installing-r-packages-in-a-nix-environment.html">d1 - Installing R packages in a Nix environment</a></li>
    <li><a class="dropdown-item" href="../articles/d2-installing-system-tools-and-texlive-packages-in-a-nix-environment.html">d2 - Installing system tools and TexLive packages in a Nix environment</a></li>
    <li><a class="dropdown-item" href="../articles/e-interactive-use.html">e - Interactive use</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-building-an-environment-for-literate-programming.html">z - Advanced topic: Building an environment for literate programming</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-handling-packages-with-remote-dependencies.html">z - Advanced topic: Handling packages with remote dependencies</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-reproducible-analytical-pipelines-with-nix.html">z - Advanced topic: Reproducible Analytical Pipelines with Nix</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-running-r-or-shell-code-in-nix-from-r.html">z - Advanced topic: Running R or Shell Code in Nix from R</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-using-nix-inside-docker.html">z - Advanced topic: Using Nix inside Docker</a></li>
    <li><a class="dropdown-item" href="../articles/z-binary_cache.html">z - Advanced topic: Rolling out your own binary cache</a></li>
    <li><a class="dropdown-item" href="../articles/z-bleeding_edge.html">z - Advanced topic: Understanding the rPackages set release cycle and using bleeding edge packages</a></li>
    <li><a class="dropdown-item" href="../articles/z-contributing_to_nixpkgs.html">z - Advanced topic: Contributing to nixpkgs</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/b-rodrigues/rix/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>e - Interactive use</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/b-rodrigues/rix/blob/master/vignettes/e-interactive-use.Rmd" class="external-link"><code>vignettes/e-interactive-use.Rmd</code></a></small>
      <div class="d-none name"><code>e-interactive-use.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette describes interactive use of environments built with
<a href="https://b-rodrigues.github.io/rix/">rix</a> using a GUI editor like RStudio. We will discuss
three scenarios: one in which you already have R and RStudio installed
on your operating system using the usual installation method for your
operating system, another in which you used Nix to install R and
RStudio, and finally the last scenario assumes you use another IDE than
RStudio, for example VS Code, Emacs, Vim…</p>
<p>It is also possible to evaluate single functions inside a dedicated,
separate, environment from another, main, interactive R session. For
more details regarding this, refer to the vignette
<code><a href="../articles/z-advanced-topic-running-r-or-shell-code-in-nix-from-r.html">vignette("z-advanced-topic-running-r-or-shell-code-in-nix-from-r")</a></code>.</p>
</div>
<div class="section level2">
<h2 id="scenario-1-you-installed-r-and-rstudio-using-the-usual-installers">Scenario 1: you installed R and RStudio using the usual
installers<a class="anchor" aria-label="anchor" href="#scenario-1-you-installed-r-and-rstudio-using-the-usual-installers"></a>
</h2>
<p>Let’s suppose that you are already running R and RStudio and that you
wish to start using <a href="https://b-rodrigues.github.io/rix/">rix</a> to define reproducible
environments for your new projects starting today. These environments
will get built using the Nix package manager and will not only include
the required R packages for your project but also a specific version of
R, and any required system-level dependency as well. If you are used to
using RStudio, then you also need to install RStudio using Nix in these
project-specific environments. This is because RStudio re-defines many
environment variables and as such, a version of RStudio installed using
the usual installer for your operating system will not be able “to see”
an R interpreter installed with Nix. As stated in the macOS-specific
vignette <code><a href="../articles/b2-setting-up-and-using-rix-on-macos.html">vignette("b2-setting-up-and-using-rix-on-macos")</a></code>,
RStudio is not available on macOS through <code>nixpkgs</code>. The
following instructions are thus only applicable to Linux and Windows. If
you’re on macOS, read the macOS-specific vignette if that’s not done
already, and then come back here and skip to the “scenario 3” of this
vignette.</p>
<p>To run a project-specific version of RStudio and R, you will first
need to create a <code>default.nix</code> file and build the environment
defined therein using Nix. Once this is done, you then need to activate
the environment before running this project-specific version of RStudio.
Suppose for example that you generated a <code>default.nix</code> file
for a project called “kmeans”, and suppose that this project is in the
following path: <code>~/Documents/kmeans</code> (on Windows it would be
something like <code>C:\Users\Billy\Documents\kmeans</code>). For
example, here is how you could use <a href="https://b-rodrigues.github.io/rix/">rix</a> to generate the
<code>default.nix</code> for this environment:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://b-rodrigues.github.io/rix/">rix</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">path_to_project</span> <span class="op">&lt;-</span> <span class="st">"~/Documents/kmeans"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span></span>
<span>  r_ver <span class="op">=</span> <span class="st">"latest"</span>,</span>
<span>  r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"ggplot2"</span><span class="op">)</span>,</span>
<span>  system_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  git_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ide <span class="op">=</span> <span class="st">"rstudio"</span>,</span>
<span>  project_path <span class="op">=</span> <span class="va">path_to_project</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  print <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Because you also have R installed through the usual method for your
operating system, you also have a system or user library of packages.
This library of packages will interfere with the library of packages of
your R environments managed by Nix. To avoid this, running
<code><a href="../reference/rix.html">rix()</a></code> not only writes a <code>default.nix</code> file in
your project’s path, but also a custom <code>.Rprofile</code> file as
well by calling <code><a href="../reference/rix_init.html">rix_init()</a></code>. This <code>.Rprofile</code>
will prevent clashes between your user library of packages and the Nix
environments’ library of packages.</p>
<p>Navigate to that folder using your terminal, and then run
<code>nix-build</code> to build the environment, and then
<code>nix-shell</code>. You will then be <em>dropped into</em> a Nix
shell. You can also use <code>nix-shell --pure</code> instead, if you
want to increase the isolation of your Nix-R environments. The
difference is that in an environment started with
<code>nix-shell</code>, you will still be able to access programs from
your system, while with <code>nix-shell --pure</code>, only programs
installed for that Nix-R environment will be available. Try something
like <code>which wget</code> from a shell started with
<code>nix-shell</code> and then from a shell started with
<code>nix-shell --pure</code> as an example (replace <code>wget</code>
by any other tool you have installed on your computer).</p>
<p>Once in the shell, you can type <code>rstudio</code> to run this
project specific version of R and RStudio with all the required packages
for this project, in this case <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> and
<a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a>. If you get an error</p>
<pre><code>qt.glx: qglx_findConfig: Failed to finding...
qt.glx: qglx_findConfig: Failed to finding...
Could not initialize GLX
Aborted (core dumped)</code></pre>
<p>then you might need to run this before typing
<code>rstudio</code>:</p>
<pre><code>export QT_XCB_GL_INTEGRATION=none</code></pre>
<p>This should solve the issue. In any case, we would be thankful if you
opened an issue if you encountered this bug and if the fix worked for
you.</p>
<p>You can then work on it as usual.</p>
<p>You can also define a shortcut to a project that will take care of
activating the environment and launching RStudio. This way, you don’t
need to start a terminal in that folder and drop into the Nix
environment each time you want to work on this project. For example, you
could define a bash alias like this:</p>
<pre><code>alias kmeans='nix-shell ~/Documents/kmeans/default.nix --run rstudio</code></pre>
<p>which would then execute RStudio in the right project by simply
typing <code>kmeans</code> in a terminal. It’s also possible to create
an executable script that you can save in your PATH:</p>
<pre><code><span><span class="co">#!/usr/bin/env nix-shell</span></span>
<span><span class="co">#!nix-shell /home/Billy/Document/kmeans/default.nix -i bash</span></span>
<span><span class="va">rstudio</span></span></code></pre>
<p>(if needed, add the <code>export QT_XCB_GL_INTEGRATION=none</code>
line before <code>rstudio</code>). Name this script something like
<code>kmeans_project</code>, make it executable (using
<code>chmod +x kmeans_project</code>), and now you can run RStudio
within this environment from anywhere.</p>
</div>
<div class="section level2">
<h2 id="scenario-2-you-dont-have-any-regular-r-and-rstudio-installation-yet">Scenario 2: you don’t have any regular R and RStudio installation
yet<a class="anchor" aria-label="anchor" href="#scenario-2-you-dont-have-any-regular-r-and-rstudio-installation-yet"></a>
</h2>
<p>If you don’t have R installed you cannot use the <a href="https://b-rodrigues.github.io/rix/">rix</a>
package to generate new expressions. In this case you might consider
installing Nix first, and then run the following command inside your
terminal to get dropped into a temporary Nix shell, which you can then
use to generate new <code>default.nix</code> files:</p>
<pre><code>nix-shell --expr "$(curl -sl https://raw.githubusercontent.com/b-rodrigues/rix/master/inst/extdata/default.nix)"</code></pre>
<p>Running the command above will download R and <a href="https://b-rodrigues.github.io/rix/">rix</a> and
then start an R session inside your terminal. You can now run something
like this:</p>
<pre><code><span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span>r_ver <span class="op">=</span> <span class="st">"latest"</span>,</span>
<span>    r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"ggplot2"</span><span class="op">)</span>,</span>
<span>    system_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    git_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    ide <span class="op">=</span> <span class="st">"rstudio"</span>,</span>
<span>    <span class="co"># change to a project's path or leave it if you're in the right folder already</span></span>
<span>    project_path <span class="op">=</span> <span class="st">"."</span>, </span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
<p>to generate a <code>default.nix</code>, and then use that file to
generate an environment with R, Rstudio, <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> and
<a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a>. If you need to add packages for your project,
rerun the command above, but add the needed packages to
<code>r_pkgs</code>. If you need to create a new environment, you could
rerun the command above, or you could install <a href="https://b-rodrigues.github.io/rix/">rix</a> in that
environment to generate new <code>default.nix</code> files. Here, there
is no need to use <code><a href="../reference/rix_init.html">rix_init()</a></code> as there won’t be any clash
between your user library of R packages (since you don’t have any), and
the R environments managed by Nix.</p>
</div>
<div class="section level2">
<h2 id="scenario-3-you-use-some-ide-other-than-rstudio">Scenario 3: you use some IDE other than RStudio<a class="anchor" aria-label="anchor" href="#scenario-3-you-use-some-ide-other-than-rstudio"></a>
</h2>
<p>VS Code and Emacs have been tested and unlike RStudio, you can use a
version of VS Code or Emacs installed through the usual means on your
system with development environments built with Nix. But there’s nothing
stopping you from installing a project-specific version of VS Code or
Emacs as well if you wish. Configuration and settings should be
accessible across every version from every environment, since these are
globally defined at the level of your system. This means that to work on
a project using VS Code, you would use a call to <code><a href="../reference/rix.html">rix()</a></code> like
so:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span></span>
<span>  r_ver <span class="op">=</span> <span class="st">"latest"</span>,</span>
<span>  r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"ggplot2"</span><span class="op">)</span>,</span>
<span>  system_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  git_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ide <span class="op">=</span> <span class="st">"code"</span>,</span>
<span>  project_path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Notice the <code>ide = "code"</code> argument. This will not install
VS Code from Nix, but will install the <a href="https://github.com/REditorSupport/languageserver/" class="external-link">languageserver</a>
package that is needed for using R with VS Code. If you want to also
install a project-specific version of VS Code, then use
<code>system_pkgs = "vscode"</code> or
<code>system_pkgs = "vscodium"</code> if you prefer VS Codium over VS
Code. For any other editor such as Emacs or Vim, set
<code>ide = "other"</code>. Also use <code>ide = "other"</code> if you
want to run scripts non-interactively, for example on a CI/CD
service.</p>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>You now know the basics of Nix and <a href="https://b-rodrigues.github.io/rix/">rix</a> and can start
using it for your projects! There are still some more vignettes that we
recommend you read which cover advanced topics.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bruno Rodrigues, Philipp Baumann.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
