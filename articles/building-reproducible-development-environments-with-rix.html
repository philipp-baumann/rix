<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rix">
<title>Building reproducible development environments with rix • rix</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Building reproducible development environments with rix">
<meta property="og:description" content="rix">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rix</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/building-reproducible-development-environments-with-rix.html">Building reproducible development environments with rix</a>
    <a class="dropdown-item" href="../articles/handling-packages-with-remote-dependencies.html">Handling packages with remote dependencies</a>
    <a class="dropdown-item" href="../articles/installing-old-packages-from-the-cran-archives.html">Installing old packages from the CRAN archives</a>
    <a class="dropdown-item" href="../articles/interactive-use.html">Interactive use</a>
    <a class="dropdown-item" href="../articles/reproducible-analytical-pipelines-with-nix.html">Reproducible Analytical Pipelines with Nix</a>
    <a class="dropdown-item" href="../articles/save-the-nix-package-versions-data.html">Save the Nix Package Versions data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Building reproducible development environments with rix</h1>
            
      
      
      <div class="d-none name"><code>building-reproducible-development-environments-with-rix.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">rix</span><span class="op">)</span></span></code></pre></div>
<!-- WARNING - This vignette is generated by {fusen} from dev/building_envs_with_rix.Rmd: do not edit by hand -->
<div class="section level2">
<h2 id="introduction-and-installation">Introduction and installation<a class="anchor" aria-label="anchor" href="#introduction-and-installation"></a>
</h2>
<p>The goal of <code>{rix}</code> is to provide an easy way to generate
<code>default.nix</code> files. These files are used by the Nix package
manager to build an environment according to the instructions defined in
it. Users can specify which version of R, R packages, other needed
software, IDE etc should be available within that environment. Writing
such files can be daunting for newcomers, and so <code>{rix}</code>
provides a function called <code><a href="../reference/rix.html">rix()</a></code>, which takes care of the
bulk of the work</p>
<p><code>{rix}</code> does not require Nix to be installed to generate
<code>default.nix</code> files, so you could generate the file on one
machine, and then build and use the environment on another machine that
has Nix installed on it (or on a CI/CD service like Github Actions for
example). If you wish to fully take advantage of Nix, I suggest you use
<a href="https://zero-to-nix.com/start/install" class="external-link">Determinate System’s
installer</a>. Nix can be installed on Linux, macOS and Windows (but on
Windows WSL2 must be enabled).</p>
<p>On Linux, once Nix is instaled, all the software that will be
installed will be saved to the <code>/nix</code> directory on the root
partition. Complete development environments built with Nix can take up
much space, so if the available space on your root parttion is limited,
I advise you to mount the <code>/nix</code> folder on another partition
with more space (for example, a secondary hard drive). For this, edit
<code>/etc/fstab</code> and add the following line at the end:</p>
<pre><code>/home/path_to/nix /nix none bind 0 0</code></pre>
<p>This will map <code>/nix</code> to <code>/home/path_to/nix</code>
which can be on a larger partition. If you have enough space on your
root partition, you can ignore the above instructions.</p>
</div>
<div class="section level2">
<h2 id="nix-environments">Nix environments<a class="anchor" aria-label="anchor" href="#nix-environments"></a>
</h2>
<p>An environment built by Nix is not totally isolated from the rest of
the system. Suppose that you the program <code>sl</code> installed on
your system, and suppose you build a Nix environment that also comes
with <code>sl</code>. If you activate that environment, the version of
<code>sl</code> that will run when called is the one included in the Nix
environment. If, however, you start <code>sl</code> in a Nix environment
that does not come with it, then your system’s <code>sl</code> will get
used instead. This can be useful when working interactively with a Nix
environment, because you can use your usual IDE to work with it. The
only exception is RStudio: RStudio looks for R in predefined paths and
cannot “see” the R provided by a Nix environment, it will instead use
the version installed on your machine. This means that if you use
RStudio to work interactively with R, you will need to install RStudio
inside that environment. <code><a href="../reference/rix.html">rix::rix()</a></code> can generate a
<code>default.nix</code> file that does that.</p>
</div>
<div class="section level2">
<h2 id="day-to-day-use-of-rix">Day-to-day use of {rix}<a class="anchor" aria-label="anchor" href="#day-to-day-use-of-rix"></a>
</h2>
<p>The ideal workflow when using <code>{rix}</code> is to create a new,
separate environment at the start of a project. Let’s say that you wish
to analyse some data set, and need <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> and
<a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a>. Let’s also suppose that you use RStudio as your
IDE. With the <code><a href="../reference/rix.html">rix::rix()</a></code> function, you can easily generate
the right <code>default.nix</code> file. You need to provide the
following inputs to <code><a href="../reference/rix.html">rix()</a></code>:</p>
<ul>
<li>
<code>r_ver</code>: the version of R required. Use “latest” for the
latest version;</li>
<li>
<code>r_pkgs</code>: the required R packages. For example
“dplyr”;</li>
<li>
<code>system_pkgs</code>: the required system packages, if needed.
For example “quarto”, or a Python interpreter;</li>
<li>
<code>git_pkgs</code>: list of git packages to add. See the example
below;</li>
<li>
<code>ide</code>: the integrated development editor to use. For
example “rstudio” if you want to use RStudio. Refer to the “Interactive
work with {rix}” for more details;</li>
<li>
<code>path</code>: the path where to save the
<code>default.nix</code> file.</li>
<li>
<code>overwrite</code>: whether to overwrite the
<code>default.nix</code> file or not.</li>
<li>
<code>print</code>: whether to print the <code>default.nix</code>
file to the console or not.</li>
</ul>
<p>In such a situation, you could create an environment with the
following call to <code><a href="../reference/rix.html">rix()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path_default_nix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span>r_ver <span class="op">=</span> <span class="st">"latest"</span>,</span>
<span>    r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"ggplot2"</span><span class="op">)</span>,</span>
<span>    system_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    git_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    ide <span class="op">=</span> <span class="st">"rstudio"</span>,</span>
<span>    project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    print <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; # This file was generated by the {rix} R package v0.3.1 on 2023-09-12</span></span>
<span><span class="co">#&gt; # with following call:</span></span>
<span><span class="co">#&gt; # &gt;rix(r_ver = "78058d810644f5ed276804ce7ea9e82d92bee293",</span></span>
<span><span class="co">#&gt; #  &gt; r_pkgs = c("dplyr",</span></span>
<span><span class="co">#&gt; #  &gt; "ggplot2"),</span></span>
<span><span class="co">#&gt; #  &gt; system_pkgs = NULL,</span></span>
<span><span class="co">#&gt; #  &gt; git_pkgs = NULL,</span></span>
<span><span class="co">#&gt; #  &gt; ide = "rstudio",</span></span>
<span><span class="co">#&gt; #  &gt; project_path = path_default_nix,</span></span>
<span><span class="co">#&gt; #  &gt; overwrite = TRUE,</span></span>
<span><span class="co">#&gt; #  &gt; print = TRUE)</span></span>
<span><span class="co">#&gt; # It uses nixpkgs' revision 78058d810644f5ed276804ce7ea9e82d92bee293 for reproducibility purposes</span></span>
<span><span class="co">#&gt; # which will install R version latest</span></span>
<span><span class="co">#&gt; # Report any issues to https://github.com/b-rodrigues/rix</span></span>
<span><span class="co">#&gt; let</span></span>
<span><span class="co">#&gt;  pkgs = import (fetchTarball "https://github.com/NixOS/nixpkgs/archive/78058d810644f5ed276804ce7ea9e82d92bee293.tar.gz") {};</span></span>
<span><span class="co">#&gt;  rpkgs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs.rPackages) dplyr ggplot2;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;   tex = (pkgs.texlive.combine {</span></span>
<span><span class="co">#&gt;   inherit (pkgs.texlive) scheme-basic ;</span></span>
<span><span class="co">#&gt; });</span></span>
<span><span class="co">#&gt;  system_packages = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs) R ;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;  rstudio_pkgs = pkgs.rstudioWrapper.override {</span></span>
<span><span class="co">#&gt;   packages = [  rpkgs ];</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;  in</span></span>
<span><span class="co">#&gt;   pkgs.mkShell {</span></span>
<span><span class="co">#&gt;     buildInputs = [  rpkgs  system_packages rstudio_pkgs ];</span></span>
<span><span class="co">#&gt;       shellHook = ''</span></span>
<span><span class="co">#&gt; R --vanilla</span></span>
<span><span class="co">#&gt; '';</span></span>
<span><span class="co">#&gt;   }</span></span></code></pre></div>
<p>To start using this environment, open a console in the folder
containing <code>default.nix</code> and use the following Nix
command:</p>
<pre><code><span><span class="va">nix</span><span class="op">-</span><span class="va">build</span></span></code></pre>
<p><code>nix-build</code> is a Nix command that builds an environment
according to the specifications found in a <code>default.nix</code>
file. Once the environment is done building, you should find a new file
called <code>result</code> next to the <code>default.nix</code> file.
This file is a symlink to the software installed by Nix. To now use the
environment, type:</p>
<pre><code><span><span class="va">nix</span><span class="op">-</span><span class="va">shell</span></span></code></pre>
<p>You can now start the RStudio provided by that environment by typing
<code>rstudio</code>. This will start a version of RStudio specific to
this environment. If you already had RStudio installed by using your
operating system’s installer, that version of RStudio will not be able
to interact with Nix environments. This is because RStudio looks for R
in certain specific paths that don’t include any Nix environments. This
is not the case with other editors like Visual Studio Code or Emacs. If
you use Visual Studio Code, you can use the following call to
<code><a href="../reference/rix.html">rix()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path_default_nix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span>r_ver <span class="op">=</span> <span class="st">"latest"</span>,</span>
<span>    r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"ggplot2"</span><span class="op">)</span>,</span>
<span>    system_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    git_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    ide <span class="op">=</span> <span class="st">"code"</span>,</span>
<span>    project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>(note the value provided to the <code>ide</code> argument).</p>
<p>This generates the following <code>default.nix</code> file:</p>
<pre><code><span><span class="co">#&gt; # This file was generated by the {rix} R package v0.3.1 on 2023-09-12</span></span>
<span><span class="co">#&gt; # with following call:</span></span>
<span><span class="co">#&gt; # &gt;rix(r_ver = "78058d810644f5ed276804ce7ea9e82d92bee293",</span></span>
<span><span class="co">#&gt; #  &gt; r_pkgs = c("dplyr",</span></span>
<span><span class="co">#&gt; #  &gt; "ggplot2"),</span></span>
<span><span class="co">#&gt; #  &gt; system_pkgs = NULL,</span></span>
<span><span class="co">#&gt; #  &gt; git_pkgs = NULL,</span></span>
<span><span class="co">#&gt; #  &gt; ide = "code",</span></span>
<span><span class="co">#&gt; #  &gt; project_path = path_default_nix,</span></span>
<span><span class="co">#&gt; #  &gt; overwrite = TRUE)</span></span>
<span><span class="co">#&gt; # It uses nixpkgs' revision 78058d810644f5ed276804ce7ea9e82d92bee293 for reproducibility purposes</span></span>
<span><span class="co">#&gt; # which will install R version latest</span></span>
<span><span class="co">#&gt; # Report any issues to https://github.com/b-rodrigues/rix</span></span>
<span><span class="co">#&gt; let</span></span>
<span><span class="co">#&gt;  pkgs = import (fetchTarball "https://github.com/NixOS/nixpkgs/archive/78058d810644f5ed276804ce7ea9e82d92bee293.tar.gz") {};</span></span>
<span><span class="co">#&gt;  rpkgs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs.rPackages) dplyr ggplot2 languageserver;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;   tex = (pkgs.texlive.combine {</span></span>
<span><span class="co">#&gt;   inherit (pkgs.texlive) scheme-basic ;</span></span>
<span><span class="co">#&gt; });</span></span>
<span><span class="co">#&gt;  system_packages = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs) R ;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;   in</span></span>
<span><span class="co">#&gt;   pkgs.mkShell {</span></span>
<span><span class="co">#&gt;     buildInputs = [  rpkgs  system_packages  ];</span></span>
<span><span class="co">#&gt;       shellHook = ''</span></span>
<span><span class="co">#&gt; R --vanilla</span></span>
<span><span class="co">#&gt; '';</span></span>
<span><span class="co">#&gt;   }</span></span></code></pre>
<p>As you can see, specifying <code>ide = "code"</code> adds the
<a href="https://github.com/REditorSupport/languageserver/" class="external-link">languageserver</a> package to the list of packages that must
be installed for this environment. This is because Visual Studio Code
requires this package to interact with R. This will not install a Nix
environment-specific version of Visual Studio Code. Now, instead of
typing <code>rstudio</code> in the Nix shell of your environment, type
<code>code</code> and this will start the Visual Studio Code you usually
use.</p>
<p>If you use another editor, like Emacs, then use
<code>ide = "other"</code>, and start that editor inside an activated
Nix environment.</p>
<p>For more details on interactive use, read the “Interactive use”
vignette.</p>
</div>
<div class="section level2">
<h2 id="running-old-projects-with-rix">Running old projects with {rix}<a class="anchor" aria-label="anchor" href="#running-old-projects-with-rix"></a>
</h2>
<p>The example below shows how to create a <code>default.nix</code> with
instructions to build an environment with R version 4.2.1, the
<a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> and <a href="https://github.com/sfirke/janitor" class="external-link">janitor</a> packages and no specific
IDE:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path_default_nix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span>r_ver <span class="op">=</span> <span class="st">"4.2.1"</span>,</span>
<span>    r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"janitor"</span><span class="op">)</span>,</span>
<span>    system_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quarto"</span><span class="op">)</span>,</span>
<span>    git_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    ide <span class="op">=</span> <span class="st">"other"</span>,</span>
<span>    project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The file looks like this:</p>
<pre><code><span><span class="co">#&gt; # This file was generated by the {rix} R package v0.3.1 on 2023-09-12</span></span>
<span><span class="co">#&gt; # with following call:</span></span>
<span><span class="co">#&gt; # &gt;rix(r_ver = "79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a",</span></span>
<span><span class="co">#&gt; #  &gt; r_pkgs = c("dplyr",</span></span>
<span><span class="co">#&gt; #  &gt; "janitor"),</span></span>
<span><span class="co">#&gt; #  &gt; system_pkgs = c("quarto"),</span></span>
<span><span class="co">#&gt; #  &gt; git_pkgs = NULL,</span></span>
<span><span class="co">#&gt; #  &gt; ide = "other",</span></span>
<span><span class="co">#&gt; #  &gt; project_path = path_default_nix,</span></span>
<span><span class="co">#&gt; #  &gt; overwrite = TRUE)</span></span>
<span><span class="co">#&gt; # It uses nixpkgs' revision 79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a for reproducibility purposes</span></span>
<span><span class="co">#&gt; # which will install R version 4.2.1</span></span>
<span><span class="co">#&gt; # Report any issues to https://github.com/b-rodrigues/rix</span></span>
<span><span class="co">#&gt; let</span></span>
<span><span class="co">#&gt;  pkgs = import (fetchTarball "https://github.com/NixOS/nixpkgs/archive/79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a.tar.gz") {};</span></span>
<span><span class="co">#&gt;  rpkgs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs.rPackages) dplyr janitor;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;   tex = (pkgs.texlive.combine {</span></span>
<span><span class="co">#&gt;   inherit (pkgs.texlive) scheme-basic ;</span></span>
<span><span class="co">#&gt; });</span></span>
<span><span class="co">#&gt;  system_packages = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs) R quarto;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;   in</span></span>
<span><span class="co">#&gt;   pkgs.mkShell {</span></span>
<span><span class="co">#&gt;     buildInputs = [  rpkgs  system_packages  ];</span></span>
<span><span class="co">#&gt;       shellHook = ''</span></span>
<span><span class="co">#&gt; R --vanilla</span></span>
<span><span class="co">#&gt; '';</span></span>
<span><span class="co">#&gt;   }</span></span></code></pre>
<p>The first line is quite important, as it shows which
<em>revision</em> of <code>nixpkgs</code> is being used for this
environment. The <em>revision</em> is the commit hash of that particular
release of <code>nixpkgs</code>, here: <code>79b3d4bcae8</code>. This
revision of <code>nixpkgs</code> is the one that shipped version 4.2.1
of R, so the <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> and <a href="https://github.com/sfirke/janitor" class="external-link">janitor</a> packages
that will get installed will be the versions available in that revision
as well. This means that R versions and package versions are always
coupled when using Nix. However, if you need a specific version of R,
but also a specific version of a package that is not available in that
particular Nix revision, one solution is to install that package from
Github.</p>
</div>
<div class="section level2">
<h2 id="installing-old-packages-archived-on-cran">Installing old packages archived on CRAN<a class="anchor" aria-label="anchor" href="#installing-old-packages-archived-on-cran"></a>
</h2>
<p>It is also possible to install an arbitrary version of a package that
has been archived on CRAN:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span>r_ver <span class="op">=</span> <span class="st">"4.2.1"</span>,</span>
<span>    r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr@0.8.0"</span>, <span class="st">"janitor@1.0.0"</span><span class="op">)</span>,</span>
<span>    system_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    git_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    ide <span class="op">=</span> <span class="st">"other"</span>,</span>
<span>    project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">path_default_nix</span>, <span class="st">"/default.nix"</span><span class="op">)</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # This file was generated by the {rix} R package v0.3.1 on 2023-09-12</span></span>
<span><span class="co">#&gt; # with following call:</span></span>
<span><span class="co">#&gt; # &gt;rix(r_ver = "79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a",</span></span>
<span><span class="co">#&gt; #  &gt; r_pkgs = c("dplyr@0.8.0",</span></span>
<span><span class="co">#&gt; #  &gt; "janitor@1.0.0"),</span></span>
<span><span class="co">#&gt; #  &gt; system_pkgs = NULL,</span></span>
<span><span class="co">#&gt; #  &gt; git_pkgs = NULL,</span></span>
<span><span class="co">#&gt; #  &gt; ide = "other",</span></span>
<span><span class="co">#&gt; #  &gt; project_path = path_default_nix,</span></span>
<span><span class="co">#&gt; #  &gt; overwrite = TRUE)</span></span>
<span><span class="co">#&gt; # It uses nixpkgs' revision 79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a for reproducibility purposes</span></span>
<span><span class="co">#&gt; # which will install R version 4.2.1</span></span>
<span><span class="co">#&gt; # Report any issues to https://github.com/b-rodrigues/rix</span></span>
<span><span class="co">#&gt; let</span></span>
<span><span class="co">#&gt;  pkgs = import (fetchTarball "https://github.com/NixOS/nixpkgs/archive/79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a.tar.gz") {};</span></span>
<span><span class="co">#&gt;   git_archive_pkgs = [ (pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;     name = "dplyr";</span></span>
<span><span class="co">#&gt;     src = pkgs.fetchzip {</span></span>
<span><span class="co">#&gt;       url = "https://cran.r-project.org/src/contrib/Archive/dplyr/dplyr_0.8.0.tar.gz";</span></span>
<span><span class="co">#&gt;       sha256 = "sha256-f30raalLd9KoZKZSxeTN71PG6BczXRIiP6g7EZeH09U=";</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;     propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;       inherit (pkgs.rPackages) assertthat glue magrittr pkgconfig R6 Rcpp rlang tibble tidyselect BH plogr;</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;   })</span></span>
<span><span class="co">#&gt; (pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;     name = "janitor";</span></span>
<span><span class="co">#&gt;     src = pkgs.fetchzip {</span></span>
<span><span class="co">#&gt;       url = "https://cran.r-project.org/src/contrib/Archive/janitor/janitor_1.0.0.tar.gz";</span></span>
<span><span class="co">#&gt;       sha256 = "sha256-3NJomE/CNbOZ+ohuVZJWe2n1RVGUm8x8a0A0qzLmdN4=";</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;     propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;       inherit (pkgs.rPackages) dplyr tidyr snakecase magrittr purrr rlang;</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;   })];</span></span>
<span><span class="co">#&gt;  tex = (pkgs.texlive.combine {</span></span>
<span><span class="co">#&gt;   inherit (pkgs.texlive) scheme-basic ;</span></span>
<span><span class="co">#&gt; });</span></span>
<span><span class="co">#&gt;  system_packages = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs) R ;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;   in</span></span>
<span><span class="co">#&gt;   pkgs.mkShell {</span></span>
<span><span class="co">#&gt;     buildInputs = [ git_archive_pkgs   system_packages  ];</span></span>
<span><span class="co">#&gt;       shellHook = ''</span></span>
<span><span class="co">#&gt; R --vanilla</span></span>
<span><span class="co">#&gt; '';</span></span>
<span><span class="co">#&gt;   }</span></span></code></pre></div>
<p>This feature should ideally be used sparingly. If you want to
reconstruct an environment as it was around 2019, use the version of R
that was current at the time. This will ensure that every package that
gets installed is at a version compatible with that version of R, which
might not be the case if you need to install a very old version of one
particular package.</p>
</div>
<div class="section level2">
<h2 id="installing-packages-from-github">Installing packages from Github<a class="anchor" aria-label="anchor" href="#installing-packages-from-github"></a>
</h2>
<p>It is also possible to install packages from Github:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span>r_ver <span class="op">=</span> <span class="st">"4.2.1"</span>,</span>
<span>    r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"janitor"</span><span class="op">)</span>,</span>
<span>    system_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quarto"</span><span class="op">)</span>,</span>
<span>    git_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>package_name <span class="op">=</span> <span class="st">"housing"</span>,</span>
<span>                   repo_url <span class="op">=</span> <span class="st">"https://github.com/rap4all/housing/"</span>,</span>
<span>                   branch_name <span class="op">=</span> <span class="st">"fusen"</span>,</span>
<span>                   commit <span class="op">=</span> <span class="st">"1c860959310b80e67c41f7bbdc3e84cef00df18e"</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>package_name <span class="op">=</span> <span class="st">"fusen"</span>,</span>
<span>                   repo_url <span class="op">=</span> <span class="st">"https://github.com/ThinkR-open/fusen"</span>,</span>
<span>                   branch_name <span class="op">=</span> <span class="st">"main"</span>,</span>
<span>                   commit <span class="op">=</span> <span class="st">"d617172447d2947efb20ad6a4463742b8a5d79dc"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    ide <span class="op">=</span> <span class="st">"other"</span>,</span>
<span>    project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">path_default_nix</span>, <span class="st">"/default.nix"</span><span class="op">)</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # This file was generated by the {rix} R package v0.3.1 on 2023-09-12</span></span>
<span><span class="co">#&gt; # with following call:</span></span>
<span><span class="co">#&gt; # &gt;rix(r_ver = "79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a",</span></span>
<span><span class="co">#&gt; #  &gt; r_pkgs = c("dplyr",</span></span>
<span><span class="co">#&gt; #  &gt; "janitor"),</span></span>
<span><span class="co">#&gt; #  &gt; system_pkgs = c("quarto"),</span></span>
<span><span class="co">#&gt; #  &gt; git_pkgs = list(list(package_name = "housing",</span></span>
<span><span class="co">#&gt; #  &gt; repo_url = "https://github.com/rap4all/housing/",</span></span>
<span><span class="co">#&gt; #  &gt; branch_name = "fusen",</span></span>
<span><span class="co">#&gt; #  &gt; commit = "1c860959310b80e67c41f7bbdc3e84cef00df18e"),</span></span>
<span><span class="co">#&gt; #  &gt; list(package_name = "fusen",</span></span>
<span><span class="co">#&gt; #  &gt; repo_url = "https://github.com/ThinkR-open/fusen",</span></span>
<span><span class="co">#&gt; #  &gt; branch_name = "main",</span></span>
<span><span class="co">#&gt; #  &gt; commit = "d617172447d2947efb20ad6a4463742b8a5d79dc")),</span></span>
<span><span class="co">#&gt; #  &gt; ide = "other",</span></span>
<span><span class="co">#&gt; #  &gt; project_path = path_default_nix,</span></span>
<span><span class="co">#&gt; #  &gt; overwrite = TRUE)</span></span>
<span><span class="co">#&gt; # It uses nixpkgs' revision 79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a for reproducibility purposes</span></span>
<span><span class="co">#&gt; # which will install R version 4.2.1</span></span>
<span><span class="co">#&gt; # Report any issues to https://github.com/b-rodrigues/rix</span></span>
<span><span class="co">#&gt; let</span></span>
<span><span class="co">#&gt;  pkgs = import (fetchTarball "https://github.com/NixOS/nixpkgs/archive/79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a.tar.gz") {};</span></span>
<span><span class="co">#&gt;  rpkgs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs.rPackages) dplyr janitor;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;  git_archive_pkgs = [(pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;     name = "housing";</span></span>
<span><span class="co">#&gt;     src = pkgs.fetchgit {</span></span>
<span><span class="co">#&gt;       url = "https://github.com/rap4all/housing/";</span></span>
<span><span class="co">#&gt;       branchName = "fusen";</span></span>
<span><span class="co">#&gt;       rev = "1c860959310b80e67c41f7bbdc3e84cef00df18e";</span></span>
<span><span class="co">#&gt;       sha256 = "sha256-s4KGtfKQ7hL0sfDhGb4BpBpspfefBN6hf+XlslqyEn4=";</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;     propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;       inherit (pkgs.rPackages) dplyr ggplot2 janitor purrr readxl rlang rvest stringr tidyr;</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;   })</span></span>
<span><span class="co">#&gt; (pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;     name = "fusen";</span></span>
<span><span class="co">#&gt;     src = pkgs.fetchgit {</span></span>
<span><span class="co">#&gt;       url = "https://github.com/ThinkR-open/fusen";</span></span>
<span><span class="co">#&gt;       branchName = "main";</span></span>
<span><span class="co">#&gt;       rev = "d617172447d2947efb20ad6a4463742b8a5d79dc";</span></span>
<span><span class="co">#&gt;       sha256 = "sha256-TOHA1ymLUSgZMYIA1a2yvuv0799svaDOl3zOhNRxcmw=";</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;     propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;       inherit (pkgs.rPackages) attachment cli desc devtools glue here magrittr parsermd roxygen2 stringi tibble tidyr usethis yaml;</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;   }) ];</span></span>
<span><span class="co">#&gt;  tex = (pkgs.texlive.combine {</span></span>
<span><span class="co">#&gt;   inherit (pkgs.texlive) scheme-basic ;</span></span>
<span><span class="co">#&gt; });</span></span>
<span><span class="co">#&gt;  system_packages = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs) R quarto;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;   in</span></span>
<span><span class="co">#&gt;   pkgs.mkShell {</span></span>
<span><span class="co">#&gt;     buildInputs = [ git_archive_pkgs rpkgs  system_packages  ];</span></span>
<span><span class="co">#&gt;       shellHook = ''</span></span>
<span><span class="co">#&gt; R --vanilla</span></span>
<span><span class="co">#&gt; '';</span></span>
<span><span class="co">#&gt;   }</span></span></code></pre></div>
<p>This will install two packages from Github: the
<code>{housing}</code> package and more specifically the code as it is
in the <code>fusen</code> branch. The commit is also provided, to pin
the exact version of the package needed. The <a href="https://thinkr-open.github.io/fusen/" class="external-link">fusen</a>
package is also installed, from the main branch at commit
<code>d617172447d</code>.</p>
</div>
<div class="section level2">
<h2 id="a-complete-example">A complete example<a class="anchor" aria-label="anchor" href="#a-complete-example"></a>
</h2>
<p>This example shows how all features of <code>{rix}</code> can work
together:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span>r_ver <span class="op">=</span> <span class="st">"4.2.1"</span>,</span>
<span>    r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"janitor"</span>, <span class="st">"AER@1.2-8"</span><span class="op">)</span>,</span>
<span>    system_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quarto"</span><span class="op">)</span>,</span>
<span>    git_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>package_name <span class="op">=</span> <span class="st">"housing"</span>,</span>
<span>                   repo_url <span class="op">=</span> <span class="st">"https://github.com/rap4all/housing/"</span>,</span>
<span>                   branch_name <span class="op">=</span> <span class="st">"fusen"</span>,</span>
<span>                   commit <span class="op">=</span> <span class="st">"1c860959310b80e67c41f7bbdc3e84cef00df18e"</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>package_name <span class="op">=</span> <span class="st">"fusen"</span>,</span>
<span>                   repo_url <span class="op">=</span> <span class="st">"https://github.com/ThinkR-open/fusen"</span>,</span>
<span>                   branch_name <span class="op">=</span> <span class="st">"main"</span>,</span>
<span>                   commit <span class="op">=</span> <span class="st">"d617172447d2947efb20ad6a4463742b8a5d79dc"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    ide <span class="op">=</span> <span class="st">"rstudio"</span>,</span>
<span>    project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">path_default_nix</span>, <span class="st">"/default.nix"</span><span class="op">)</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # This file was generated by the {rix} R package v0.3.1 on 2023-09-12</span></span>
<span><span class="co">#&gt; # with following call:</span></span>
<span><span class="co">#&gt; # &gt;rix(r_ver = "79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a",</span></span>
<span><span class="co">#&gt; #  &gt; r_pkgs = c("dplyr",</span></span>
<span><span class="co">#&gt; #  &gt; "janitor",</span></span>
<span><span class="co">#&gt; #  &gt; "AER@1.2-8"),</span></span>
<span><span class="co">#&gt; #  &gt; system_pkgs = c("quarto"),</span></span>
<span><span class="co">#&gt; #  &gt; git_pkgs = list(list(package_name = "housing",</span></span>
<span><span class="co">#&gt; #  &gt; repo_url = "https://github.com/rap4all/housing/",</span></span>
<span><span class="co">#&gt; #  &gt; branch_name = "fusen",</span></span>
<span><span class="co">#&gt; #  &gt; commit = "1c860959310b80e67c41f7bbdc3e84cef00df18e"),</span></span>
<span><span class="co">#&gt; #  &gt; list(package_name = "fusen",</span></span>
<span><span class="co">#&gt; #  &gt; repo_url = "https://github.com/ThinkR-open/fusen",</span></span>
<span><span class="co">#&gt; #  &gt; branch_name = "main",</span></span>
<span><span class="co">#&gt; #  &gt; commit = "d617172447d2947efb20ad6a4463742b8a5d79dc")),</span></span>
<span><span class="co">#&gt; #  &gt; ide = "rstudio",</span></span>
<span><span class="co">#&gt; #  &gt; project_path = path_default_nix,</span></span>
<span><span class="co">#&gt; #  &gt;      overwrite = TRUE)</span></span>
<span><span class="co">#&gt; # It uses nixpkgs' revision 79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a for reproducibility purposes</span></span>
<span><span class="co">#&gt; # which will install R version 4.2.1</span></span>
<span><span class="co">#&gt; # Report any issues to https://github.com/b-rodrigues/rix</span></span>
<span><span class="co">#&gt; let</span></span>
<span><span class="co">#&gt;  pkgs = import (fetchTarball "https://github.com/NixOS/nixpkgs/archive/79b3d4bcae8c7007c9fd51c279a8a67acfa73a2a.tar.gz") {};</span></span>
<span><span class="co">#&gt;  rpkgs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs.rPackages) dplyr janitor;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;  git_archive_pkgs = [(pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;     name = "housing";</span></span>
<span><span class="co">#&gt;     src = pkgs.fetchgit {</span></span>
<span><span class="co">#&gt;       url = "https://github.com/rap4all/housing/";</span></span>
<span><span class="co">#&gt;       branchName = "fusen";</span></span>
<span><span class="co">#&gt;       rev = "1c860959310b80e67c41f7bbdc3e84cef00df18e";</span></span>
<span><span class="co">#&gt;       sha256 = "sha256-s4KGtfKQ7hL0sfDhGb4BpBpspfefBN6hf+XlslqyEn4=";</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;     propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;       inherit (pkgs.rPackages) dplyr ggplot2 janitor purrr readxl rlang rvest stringr tidyr;</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;   })</span></span>
<span><span class="co">#&gt; (pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;     name = "fusen";</span></span>
<span><span class="co">#&gt;     src = pkgs.fetchgit {</span></span>
<span><span class="co">#&gt;       url = "https://github.com/ThinkR-open/fusen";</span></span>
<span><span class="co">#&gt;       branchName = "main";</span></span>
<span><span class="co">#&gt;       rev = "d617172447d2947efb20ad6a4463742b8a5d79dc";</span></span>
<span><span class="co">#&gt;       sha256 = "sha256-TOHA1ymLUSgZMYIA1a2yvuv0799svaDOl3zOhNRxcmw=";</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;     propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;       inherit (pkgs.rPackages) attachment cli desc devtools glue here magrittr parsermd roxygen2 stringi tibble tidyr usethis yaml;</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;   }) (pkgs.rPackages.buildRPackage {</span></span>
<span><span class="co">#&gt;     name = "AER";</span></span>
<span><span class="co">#&gt;     src = pkgs.fetchzip {</span></span>
<span><span class="co">#&gt;       url = "https://cran.r-project.org/src/contrib/Archive/AER/AER_1.2-8.tar.gz";</span></span>
<span><span class="co">#&gt;       sha256 = "sha256-OqxXcnUX/2C6wfD5fuNayc8OU+mstI3tt4eBVGQZ2S0=";</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;     propagatedBuildInputs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;       inherit (pkgs.rPackages) car lmtest sandwich survival zoo Formula;</span></span>
<span><span class="co">#&gt;     };</span></span>
<span><span class="co">#&gt;   })];</span></span>
<span><span class="co">#&gt;  tex = (pkgs.texlive.combine {</span></span>
<span><span class="co">#&gt;   inherit (pkgs.texlive) scheme-basic ;</span></span>
<span><span class="co">#&gt; });</span></span>
<span><span class="co">#&gt;  system_packages = builtins.attrValues {</span></span>
<span><span class="co">#&gt;   inherit (pkgs) R quarto;</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;  rstudio_pkgs = pkgs.rstudioWrapper.override {</span></span>
<span><span class="co">#&gt;   packages = [ git_archive_pkgs rpkgs ];</span></span>
<span><span class="co">#&gt; };</span></span>
<span><span class="co">#&gt;  in</span></span>
<span><span class="co">#&gt;   pkgs.mkShell {</span></span>
<span><span class="co">#&gt;     buildInputs = [ git_archive_pkgs rpkgs  system_packages rstudio_pkgs ];</span></span>
<span><span class="co">#&gt;       shellHook = ''</span></span>
<span><span class="co">#&gt; R --vanilla</span></span>
<span><span class="co">#&gt; '';</span></span>
<span><span class="co">#&gt;   }</span></span></code></pre></div>
<p>To learn more about using <code>{rix}</code> on a daily basis, read
the <a href="https://b-rodrigues.github.io/rix/articles/interactive-use.html" class="external-link">Interactive
use</a> vignette.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Bruno Rodrigues, Philipp Baumann.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
